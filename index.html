<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rock-Paper-Scissors</title>
        <link rel="stylesheet" href="styles.css">
    </head>

    <body>
        <h1>JAN-KEN-GUU</h1>
    </body>

    <script>
        const choice = ['rock', 'paper', 'scissors'];

        function getComputerChoice() {
            return choice[Math.floor(Math.random() * choice.length)]; 
        }

        function jankengu(playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase();
            // Added variable 'winner' for each scenario rather than just on wins (caused counting issue)
            if (playerSelection === computerSelection) {
                winner = 'draw';
                return "It's a Draw! Play Again";
            } else if (playerSelection === 'rock' && computerSelection === 'paper') {
                winner = 'comp';
                return "You Lose! Paper covers Rock"; 
            } else if (playerSelection === 'rock' && computerSelection === 'scissors') {
                winner = 'play';
                return "You Win! Rock smashes Scissors";
            } else if (playerSelection === 'paper' && computerSelection === 'rock') {
                winner = 'play';
                return "You Win! Paper covers Rock";
            } else if (playerSelection === 'paper' && computerSelection === 'scissors') {
                winner = 'comp';
                return "You Lose! Scissors cuts Paper";
            } else if (playerSelection === 'scissors' && computerSelection === 'paper') {
                winner = 'play';
                return "You Win! Scissors cuts Paper";
            } else if (playerSelection === 'scissors' && computerSelection === 'rock') {
                winner = 'comp';
                return "You Lose! Rock smashes Scissors";
            } else {
                return "Please choose a proper weapon";
                winner = 'draw';
            }
        }
        // Initialize win counter
        let playerWin = 0;
        let compWin = 0;

        function game() {
            let player = prompt("Choose your weapon!");
            let computer = getComputerChoice();
            jankengu(player, computer);
            // Fixes previous counting issue for back to back wins with same choice and draws (no count)
            if (winner === 'play') {
                playerWin++;
            } else if (winner === 'comp') {
                compWin++;
            } else {
                playerWin = playerWin + 0;
                compWin = compWin + 0;
            }
            console.log(player);
            console.log(computer);
            console.log(playerWin);
            console.log(compWin);
            console.log(winner);
            console.log(jankengu(player, computer));
        }

        // Plays game until one side reaches 5 wins
        while (playerWin < 5 && compWin < 5) {
            game();
        }

        // Prints winner after one side reaches 5
        if (playerWin === 5) {
                console.log(`Game Over. You Win 5 - ${compWin}!`);
            } else if (compWin === 5) {
                console.log(`Game Over. You Lose ${playerWin} - 5`);
            }
    </script>
</html>